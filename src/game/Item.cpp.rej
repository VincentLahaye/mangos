***************
*** 1032,1037 ****
          Item *pItem = NewItemOrBag( pProto );
          if( pItem->Create(sObjectMgr.GenerateLowGuid(HIGHGUID_ITEM), item, player) )
          {
              pItem->SetCount( count );
              return pItem;
          }
--- 1032,1046 ----
          Item *pItem = NewItemOrBag( pProto );
          if( pItem->Create(sObjectMgr.GenerateLowGuid(HIGHGUID_ITEM), item, player) )
          {
+  /** World of Warcraft Armory **/
+  if (pProto->Quality > 2 && pProto->Flags != 2048 && (pProto->Class == ITEM_CLASS_WEAPON || pProto->Class == ITEM_CLASS_ARMOR) && player)
+  {
+  std::ostringstream ss;
+  sLog.outDetail("WoWArmory: write feed log (guid: %u, type: 2, data: %u)", player->GetGUIDLow(), item);
+  ss << "REPLACE INTO character_feed_log (guid, type, data, date, counter, item_guid) VALUES (" << player->GetGUIDLow() << ", 2, " << item << ", UNIX_TIMESTAMP(NOW()), 1," << pItem->GetGUIDLow() << ")";
+  CharacterDatabase.PExecute( ss.str().c_str() );
+  }
+  /** World of Warcraft Armory **/
              pItem->SetCount( count );
              return pItem;
          }
